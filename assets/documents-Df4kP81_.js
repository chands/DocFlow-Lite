import{w as Br}from"./with-props-DhFLlbol.js";import{r as D,l as o,v as _e,w as Ur}from"./chunk-HA7DTUK3-Cfv0O0ru.js";import{c as ne,a as ze,P as de,t as L,l as zr,g as We,h as Wr,e as ge,R as Vr,i as Yr,k as Gr,F as Hr,D as qr,f as Xr,d as Be}from"./Combination-EoAd8fCK.js";import{a as Y,B as J,S as Kr,u as be,b as Qr,d as Jr,e as At}from"./button-Des3fbYk.js";import"./index-NHSWsMD8.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Rt=ne("Download",Zr);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ue=ne("FileText",eo);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],It=ne("File",to);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ro=ne("Image",no);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],ao=ne("Maximize",oo);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],io=ne("Minimize",so);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],lo=ne("Move",co);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],fo=ne("Share2",uo);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ft=ne("SquareCheckBig",mo);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Tt=ne("Square",go);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],po=ne("Trash",ho);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],yo=ne("Upload",vo);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ve=ne("X",xo);function Ea({}){return[{title:"Documents - DocFlow Lite"},{name:"description",content:"Upload, organize, and manage your documents with DocFlow Lite."}]}var Ye="Progress",Ge=100,[wo,Pa]=ze(Ye),[bo,Do]=wo(Ye),$t=D.forwardRef((n,a)=>{const{__scopeProgress:c,value:d=null,max:u,getValueLabel:m=No,...y}=n;(u||u===0)&&!Ct(u)&&console.error(_o(`${u}`,"Progress"));const x=Ct(u)?u:Ge;d!==null&&!St(d,x)&&console.error(jo(`${d}`,"Progress"));const I=St(d,x)?d:null,E=Se(I)?m(I,x):void 0;return o.jsx(bo,{scope:c,value:I,max:x,children:o.jsx(de.div,{"aria-valuemax":x,"aria-valuemin":0,"aria-valuenow":Se(I)?I:void 0,"aria-valuetext":E,role:"progressbar","data-state":Lt(I,x),"data-value":I??void 0,"data-max":x,...y,ref:a})})});$t.displayName=Ye;var kt="ProgressIndicator",Ot=D.forwardRef((n,a)=>{const{__scopeProgress:c,...d}=n,u=Do(kt,c);return o.jsx(de.div,{"data-state":Lt(u.value,u.max),"data-value":u.value??void 0,"data-max":u.max,...d,ref:a})});Ot.displayName=kt;function No(n,a){return`${Math.round(n/a*100)}%`}function Lt(n,a){return n==null?"indeterminate":n===a?"complete":"loading"}function Se(n){return typeof n=="number"}function Ct(n){return Se(n)&&!isNaN(n)&&n>0}function St(n,a){return Se(n)&&!isNaN(n)&&n<=a&&n>=0}function _o(n,a){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${a}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ge}\`.`}function jo(n,a){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${a}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ge} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Io=$t,Co=Ot;function He({className:n,value:a,...c}){return o.jsx(Io,{"data-slot":"progress",className:Y("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",n),...c,children:o.jsx(Co,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})})}function je(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Mt={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(n,a){(function(c){n.exports=c()})(function(){return function c(d,u,m){function y(E,S){if(!u[E]){if(!d[E]){var h=typeof je=="function"&&je;if(!S&&h)return h(E,!0);if(x)return x(E,!0);var p=new Error("Cannot find module '"+E+"'");throw p.code="MODULE_NOT_FOUND",p}var $=u[E]={exports:{}};d[E][0].call($.exports,function(j){var C=d[E][1][j];return y(C||j)},$,$.exports,c,d,u,m)}return u[E].exports}for(var x=typeof je=="function"&&je,I=0;I<m.length;I++)y(m[I]);return y}({1:[function(c,d,u){(function(m){var y=m.MutationObserver||m.WebKitMutationObserver,x;if(y){var I=0,E=new y(j),S=m.document.createTextNode("");E.observe(S,{characterData:!0}),x=function(){S.data=I=++I%2}}else if(!m.setImmediate&&typeof m.MessageChannel<"u"){var h=new m.MessageChannel;h.port1.onmessage=j,x=function(){h.port2.postMessage(0)}}else"document"in m&&"onreadystatechange"in m.document.createElement("script")?x=function(){var _=m.document.createElement("script");_.onreadystatechange=function(){j(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},m.document.documentElement.appendChild(_)}:x=function(){setTimeout(j,0)};var p,$=[];function j(){p=!0;for(var _,R,T=$.length;T;){for(R=$,$=[],_=-1;++_<T;)R[_]();T=$.length}p=!1}d.exports=C;function C(_){$.push(_)===1&&!p&&x()}}).call(this,typeof _e<"u"?_e:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(c,d,u){var m=c(1);function y(){}var x={},I=["REJECTED"],E=["FULFILLED"],S=["PENDING"];d.exports=h;function h(f){if(typeof f!="function")throw new TypeError("resolver must be a function");this.state=S,this.queue=[],this.outcome=void 0,f!==y&&C(this,f)}h.prototype.catch=function(f){return this.then(null,f)},h.prototype.then=function(f,F){if(typeof f!="function"&&this.state===E||typeof F!="function"&&this.state===I)return this;var P=new this.constructor(y);if(this.state!==S){var k=this.state===E?f:F;$(P,k,this.outcome)}else this.queue.push(new p(P,f,F));return P};function p(f,F,P){this.promise=f,typeof F=="function"&&(this.onFulfilled=F,this.callFulfilled=this.otherCallFulfilled),typeof P=="function"&&(this.onRejected=P,this.callRejected=this.otherCallRejected)}p.prototype.callFulfilled=function(f){x.resolve(this.promise,f)},p.prototype.otherCallFulfilled=function(f){$(this.promise,this.onFulfilled,f)},p.prototype.callRejected=function(f){x.reject(this.promise,f)},p.prototype.otherCallRejected=function(f){$(this.promise,this.onRejected,f)};function $(f,F,P){m(function(){var k;try{k=F(P)}catch(z){return x.reject(f,z)}k===f?x.reject(f,new TypeError("Cannot resolve promise with itself")):x.resolve(f,k)})}x.resolve=function(f,F){var P=_(j,F);if(P.status==="error")return x.reject(f,P.value);var k=P.value;if(k)C(f,k);else{f.state=E,f.outcome=F;for(var z=-1,G=f.queue.length;++z<G;)f.queue[z].callFulfilled(F)}return f},x.reject=function(f,F){f.state=I,f.outcome=F;for(var P=-1,k=f.queue.length;++P<k;)f.queue[P].callRejected(F);return f};function j(f){var F=f&&f.then;if(f&&(typeof f=="object"||typeof f=="function")&&typeof F=="function")return function(){F.apply(f,arguments)}}function C(f,F){var P=!1;function k(q){P||(P=!0,x.reject(f,q))}function z(q){P||(P=!0,x.resolve(f,q))}function G(){F(z,k)}var K=_(G);K.status==="error"&&k(K.value)}function _(f,F){var P={};try{P.value=f(F),P.status="success"}catch(k){P.status="error",P.value=k}return P}h.resolve=R;function R(f){return f instanceof this?f:x.resolve(new this(y),f)}h.reject=T;function T(f){var F=new this(y);return x.reject(F,f)}h.all=X;function X(f){var F=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var P=f.length,k=!1;if(!P)return this.resolve([]);for(var z=new Array(P),G=0,K=-1,q=new this(y);++K<P;)Q(f[K],K);return q;function Q(le,fe){F.resolve(le).then(ve,function(W){k||(k=!0,x.reject(q,W))});function ve(W){z[fe]=W,++G===P&&!k&&(k=!0,x.resolve(q,z))}}}h.race=M;function M(f){var F=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var P=f.length,k=!1;if(!P)return this.resolve([]);for(var z=-1,G=new this(y);++z<P;)K(f[z]);return G;function K(q){F.resolve(q).then(function(Q){k||(k=!0,x.resolve(G,Q))},function(Q){k||(k=!0,x.reject(G,Q))})}}},{1:1}],3:[function(c,d,u){(function(m){typeof m.Promise!="function"&&(m.Promise=c(2))}).call(this,typeof _e<"u"?_e:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(c,d,u){var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function y(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function x(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var I=x();function E(){try{if(!I||!I.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),r=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||r)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function S(e,r){e=e||[],r=r||{};try{return new Blob(e,r)}catch(s){if(s.name!=="TypeError")throw s;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,i=new t,l=0;l<e.length;l+=1)i.append(e[l]);return i.getBlob(r.type)}}typeof Promise>"u"&&c(3);var h=Promise;function p(e,r){r&&e.then(function(t){r(null,t)},function(t){r(t)})}function $(e,r,t){typeof r=="function"&&e.then(r),typeof t=="function"&&e.catch(t)}function j(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function C(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var _="local-forage-detect-blob-support",R=void 0,T={},X=Object.prototype.toString,M="readonly",f="readwrite";function F(e){for(var r=e.length,t=new ArrayBuffer(r),i=new Uint8Array(t),l=0;l<r;l++)i[l]=e.charCodeAt(l);return t}function P(e){return new h(function(r){var t=e.transaction(_,f),i=S([""]);t.objectStore(_).put(i,"key"),t.onabort=function(l){l.preventDefault(),l.stopPropagation(),r(!1)},t.oncomplete=function(){var l=navigator.userAgent.match(/Chrome\/(\d+)/),s=navigator.userAgent.match(/Edge\//);r(s||!l||parseInt(l[1],10)>=43)}}).catch(function(){return!1})}function k(e){return typeof R=="boolean"?h.resolve(R):P(e).then(function(r){return R=r,R})}function z(e){var r=T[e.name],t={};t.promise=new h(function(i,l){t.resolve=i,t.reject=l}),r.deferredOperations.push(t),r.dbReady?r.dbReady=r.dbReady.then(function(){return t.promise}):r.dbReady=t.promise}function G(e){var r=T[e.name],t=r.deferredOperations.pop();if(t)return t.resolve(),t.promise}function K(e,r){var t=T[e.name],i=t.deferredOperations.pop();if(i)return i.reject(r),i.promise}function q(e,r){return new h(function(t,i){if(T[e.name]=T[e.name]||st(),e.db)if(r)z(e),e.db.close();else return t(e.db);var l=[e.name];r&&l.push(e.version);var s=I.open.apply(I,l);r&&(s.onupgradeneeded=function(g){var v=s.result;try{v.createObjectStore(e.storeName),g.oldVersion<=1&&v.createObjectStore(_)}catch(w){if(w.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+g.oldVersion+" to version "+g.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw w}}),s.onerror=function(g){g.preventDefault(),i(s.error)},s.onsuccess=function(){var g=s.result;g.onversionchange=function(v){v.target.close()},t(g),G(e)}})}function Q(e){return q(e,!1)}function le(e){return q(e,!0)}function fe(e,r){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),i=e.version<e.db.version,l=e.version>e.db.version;if(i&&(e.version!==r&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),l||t){if(t){var s=e.db.version+1;s>e.version&&(e.version=s)}return!0}return!1}function ve(e){return new h(function(r,t){var i=new FileReader;i.onerror=t,i.onloadend=function(l){var s=btoa(l.target.result||"");r({__local_forage_encoded_blob:!0,data:s,type:e.type})},i.readAsBinaryString(e)})}function W(e){var r=F(atob(e.data));return S([r],{type:e.type})}function ee(e){return e&&e.__local_forage_encoded_blob}function ye(e){var r=this,t=r._initReady().then(function(){var i=T[r._dbInfo.name];if(i&&i.dbReady)return i.dbReady});return $(t,e,e),t}function zn(e){z(e);for(var r=T[e.name],t=r.forages,i=0;i<t.length;i++){var l=t[i];l._dbInfo.db&&(l._dbInfo.db.close(),l._dbInfo.db=null)}return e.db=null,Q(e).then(function(s){return e.db=s,fe(e)?le(e):s}).then(function(s){e.db=r.db=s;for(var g=0;g<t.length;g++)t[g]._dbInfo.db=s}).catch(function(s){throw K(e,s),s})}function ae(e,r,t,i){i===void 0&&(i=1);try{var l=e.db.transaction(e.storeName,r);t(null,l)}catch(s){if(i>0&&(!e.db||s.name==="InvalidStateError"||s.name==="NotFoundError"))return h.resolve().then(function(){if(!e.db||s.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),le(e)}).then(function(){return zn(e).then(function(){ae(e,r,t,i-1)})}).catch(t);t(s)}}function st(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Wn(e){var r=this,t={db:null};if(e)for(var i in e)t[i]=e[i];var l=T[t.name];l||(l=st(),T[t.name]=l),l.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=ye);var s=[];function g(){return h.resolve()}for(var v=0;v<l.forages.length;v++){var w=l.forages[v];w!==r&&s.push(w._initReady().catch(g))}var b=l.forages.slice(0);return h.all(s).then(function(){return t.db=l.db,Q(t)}).then(function(N){return t.db=N,fe(t,r._defaultConfig.version)?le(t):N}).then(function(N){t.db=l.db=N,r._dbInfo=t;for(var A=0;A<b.length;A++){var O=b[A];O!==r&&(O._dbInfo.db=t.db,O._dbInfo.version=t.version)}})}function Vn(e,r){var t=this;e=j(e);var i=new h(function(l,s){t.ready().then(function(){ae(t._dbInfo,M,function(g,v){if(g)return s(g);try{var w=v.objectStore(t._dbInfo.storeName),b=w.get(e);b.onsuccess=function(){var N=b.result;N===void 0&&(N=null),ee(N)&&(N=W(N)),l(N)},b.onerror=function(){s(b.error)}}catch(N){s(N)}})}).catch(s)});return p(i,r),i}function Yn(e,r){var t=this,i=new h(function(l,s){t.ready().then(function(){ae(t._dbInfo,M,function(g,v){if(g)return s(g);try{var w=v.objectStore(t._dbInfo.storeName),b=w.openCursor(),N=1;b.onsuccess=function(){var A=b.result;if(A){var O=A.value;ee(O)&&(O=W(O));var B=e(O,A.key,N++);B!==void 0?l(B):A.continue()}else l()},b.onerror=function(){s(b.error)}}catch(A){s(A)}})}).catch(s)});return p(i,r),i}function Gn(e,r,t){var i=this;e=j(e);var l=new h(function(s,g){var v;i.ready().then(function(){return v=i._dbInfo,X.call(r)==="[object Blob]"?k(v.db).then(function(w){return w?r:ve(r)}):r}).then(function(w){ae(i._dbInfo,f,function(b,N){if(b)return g(b);try{var A=N.objectStore(i._dbInfo.storeName);w===null&&(w=void 0);var O=A.put(w,e);N.oncomplete=function(){w===void 0&&(w=null),s(w)},N.onabort=N.onerror=function(){var B=O.error?O.error:O.transaction.error;g(B)}}catch(B){g(B)}})}).catch(g)});return p(l,t),l}function Hn(e,r){var t=this;e=j(e);var i=new h(function(l,s){t.ready().then(function(){ae(t._dbInfo,f,function(g,v){if(g)return s(g);try{var w=v.objectStore(t._dbInfo.storeName),b=w.delete(e);v.oncomplete=function(){l()},v.onerror=function(){s(b.error)},v.onabort=function(){var N=b.error?b.error:b.transaction.error;s(N)}}catch(N){s(N)}})}).catch(s)});return p(i,r),i}function qn(e){var r=this,t=new h(function(i,l){r.ready().then(function(){ae(r._dbInfo,f,function(s,g){if(s)return l(s);try{var v=g.objectStore(r._dbInfo.storeName),w=v.clear();g.oncomplete=function(){i()},g.onabort=g.onerror=function(){var b=w.error?w.error:w.transaction.error;l(b)}}catch(b){l(b)}})}).catch(l)});return p(t,e),t}function Xn(e){var r=this,t=new h(function(i,l){r.ready().then(function(){ae(r._dbInfo,M,function(s,g){if(s)return l(s);try{var v=g.objectStore(r._dbInfo.storeName),w=v.count();w.onsuccess=function(){i(w.result)},w.onerror=function(){l(w.error)}}catch(b){l(b)}})}).catch(l)});return p(t,e),t}function Kn(e,r){var t=this,i=new h(function(l,s){if(e<0){l(null);return}t.ready().then(function(){ae(t._dbInfo,M,function(g,v){if(g)return s(g);try{var w=v.objectStore(t._dbInfo.storeName),b=!1,N=w.openKeyCursor();N.onsuccess=function(){var A=N.result;if(!A){l(null);return}e===0||b?l(A.key):(b=!0,A.advance(e))},N.onerror=function(){s(N.error)}}catch(A){s(A)}})}).catch(s)});return p(i,r),i}function Qn(e){var r=this,t=new h(function(i,l){r.ready().then(function(){ae(r._dbInfo,M,function(s,g){if(s)return l(s);try{var v=g.objectStore(r._dbInfo.storeName),w=v.openKeyCursor(),b=[];w.onsuccess=function(){var N=w.result;if(!N){i(b);return}b.push(N.key),N.continue()},w.onerror=function(){l(w.error)}}catch(N){l(N)}})}).catch(l)});return p(t,e),t}function Jn(e,r){r=C.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var i=this,l;if(!e.name)l=h.reject("Invalid arguments");else{var s=e.name===t.name&&i._dbInfo.db,g=s?h.resolve(i._dbInfo.db):Q(e).then(function(v){var w=T[e.name],b=w.forages;w.db=v;for(var N=0;N<b.length;N++)b[N]._dbInfo.db=v;return v});e.storeName?l=g.then(function(v){if(v.objectStoreNames.contains(e.storeName)){var w=v.version+1;z(e);var b=T[e.name],N=b.forages;v.close();for(var A=0;A<N.length;A++){var O=N[A];O._dbInfo.db=null,O._dbInfo.version=w}var B=new h(function(U,H){var V=I.open(e.name,w);V.onerror=function(re){var we=V.result;we.close(),H(re)},V.onupgradeneeded=function(){var re=V.result;re.deleteObjectStore(e.storeName)},V.onsuccess=function(){var re=V.result;re.close(),U(re)}});return B.then(function(U){b.db=U;for(var H=0;H<N.length;H++){var V=N[H];V._dbInfo.db=U,G(V._dbInfo)}}).catch(function(U){throw(K(e,U)||h.resolve()).catch(function(){}),U})}}):l=g.then(function(v){z(e);var w=T[e.name],b=w.forages;v.close();for(var N=0;N<b.length;N++){var A=b[N];A._dbInfo.db=null}var O=new h(function(B,U){var H=I.deleteDatabase(e.name);H.onerror=function(){var V=H.result;V&&V.close(),U(H.error)},H.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},H.onsuccess=function(){var V=H.result;V&&V.close(),B(V)}});return O.then(function(B){w.db=B;for(var U=0;U<b.length;U++){var H=b[U];G(H._dbInfo)}}).catch(function(B){throw(K(e,B)||h.resolve()).catch(function(){}),B})})}return p(l,r),l}var Zn={_driver:"asyncStorage",_initStorage:Wn,_support:E(),iterate:Yn,getItem:Vn,setItem:Gn,removeItem:Hn,clear:qn,length:Xn,key:Kn,keys:Qn,dropInstance:Jn};function er(){return typeof openDatabase=="function"}var ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tr="~~local_forage_type~",it=/^~~local_forage_type~([^~]+)~/,De="__lfsc__:",Ae=De.length,Re="arbf",Fe="blob",ct="si08",lt="ui08",ut="uic8",dt="si16",ft="si32",mt="ur16",gt="ui32",ht="fl32",pt="fl64",vt=Ae+Re.length,yt=Object.prototype.toString;function xt(e){var r=e.length*.75,t=e.length,i,l=0,s,g,v,w;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);var b=new ArrayBuffer(r),N=new Uint8Array(b);for(i=0;i<t;i+=4)s=ie.indexOf(e[i]),g=ie.indexOf(e[i+1]),v=ie.indexOf(e[i+2]),w=ie.indexOf(e[i+3]),N[l++]=s<<2|g>>4,N[l++]=(g&15)<<4|v>>2,N[l++]=(v&3)<<6|w&63;return b}function Te(e){var r=new Uint8Array(e),t="",i;for(i=0;i<r.length;i+=3)t+=ie[r[i]>>2],t+=ie[(r[i]&3)<<4|r[i+1]>>4],t+=ie[(r[i+1]&15)<<2|r[i+2]>>6],t+=ie[r[i+2]&63];return r.length%3===2?t=t.substring(0,t.length-1)+"=":r.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function nr(e,r){var t="";if(e&&(t=yt.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&yt.call(e.buffer)==="[object ArrayBuffer]")){var i,l=De;e instanceof ArrayBuffer?(i=e,l+=Re):(i=e.buffer,t==="[object Int8Array]"?l+=ct:t==="[object Uint8Array]"?l+=lt:t==="[object Uint8ClampedArray]"?l+=ut:t==="[object Int16Array]"?l+=dt:t==="[object Uint16Array]"?l+=mt:t==="[object Int32Array]"?l+=ft:t==="[object Uint32Array]"?l+=gt:t==="[object Float32Array]"?l+=ht:t==="[object Float64Array]"?l+=pt:r(new Error("Failed to get type for BinaryArray"))),r(l+Te(i))}else if(t==="[object Blob]"){var s=new FileReader;s.onload=function(){var g=tr+e.type+"~"+Te(this.result);r(De+Fe+g)},s.readAsArrayBuffer(e)}else try{r(JSON.stringify(e))}catch(g){console.error("Couldn't convert value into a JSON string: ",e),r(null,g)}}function rr(e){if(e.substring(0,Ae)!==De)return JSON.parse(e);var r=e.substring(vt),t=e.substring(Ae,vt),i;if(t===Fe&&it.test(r)){var l=r.match(it);i=l[1],r=r.substring(l[0].length)}var s=xt(r);switch(t){case Re:return s;case Fe:return S([s],{type:i});case ct:return new Int8Array(s);case lt:return new Uint8Array(s);case ut:return new Uint8ClampedArray(s);case dt:return new Int16Array(s);case mt:return new Uint16Array(s);case ft:return new Int32Array(s);case gt:return new Uint32Array(s);case ht:return new Float32Array(s);case pt:return new Float64Array(s);default:throw new Error("Unkown type: "+t)}}var $e={serialize:nr,deserialize:rr,stringToBuffer:xt,bufferToString:Te};function wt(e,r,t,i){e.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,i)}function or(e){var r=this,t={db:null};if(e)for(var i in e)t[i]=typeof e[i]!="string"?e[i].toString():e[i];var l=new h(function(s,g){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(v){return g(v)}t.db.transaction(function(v){wt(v,t,function(){r._dbInfo=t,s()},function(w,b){g(b)})},g)});return t.serializer=$e,l}function ce(e,r,t,i,l,s){e.executeSql(t,i,l,function(g,v){v.code===v.SYNTAX_ERR?g.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(w,b){b.rows.length?s(w,v):wt(w,r,function(){w.executeSql(t,i,l,s)},s)},s):s(g,v)},s)}function ar(e,r){var t=this;e=j(e);var i=new h(function(l,s){t.ready().then(function(){var g=t._dbInfo;g.db.transaction(function(v){ce(v,g,"SELECT * FROM "+g.storeName+" WHERE key = ? LIMIT 1",[e],function(w,b){var N=b.rows.length?b.rows.item(0).value:null;N&&(N=g.serializer.deserialize(N)),l(N)},function(w,b){s(b)})})}).catch(s)});return p(i,r),i}function sr(e,r){var t=this,i=new h(function(l,s){t.ready().then(function(){var g=t._dbInfo;g.db.transaction(function(v){ce(v,g,"SELECT * FROM "+g.storeName,[],function(w,b){for(var N=b.rows,A=N.length,O=0;O<A;O++){var B=N.item(O),U=B.value;if(U&&(U=g.serializer.deserialize(U)),U=e(U,B.key,O+1),U!==void 0){l(U);return}}l()},function(w,b){s(b)})})}).catch(s)});return p(i,r),i}function bt(e,r,t,i){var l=this;e=j(e);var s=new h(function(g,v){l.ready().then(function(){r===void 0&&(r=null);var w=r,b=l._dbInfo;b.serializer.serialize(r,function(N,A){A?v(A):b.db.transaction(function(O){ce(O,b,"INSERT OR REPLACE INTO "+b.storeName+" (key, value) VALUES (?, ?)",[e,N],function(){g(w)},function(B,U){v(U)})},function(O){if(O.code===O.QUOTA_ERR){if(i>0){g(bt.apply(l,[e,w,t,i-1]));return}v(O)}})})}).catch(v)});return p(s,t),s}function ir(e,r,t){return bt.apply(this,[e,r,t,1])}function cr(e,r){var t=this;e=j(e);var i=new h(function(l,s){t.ready().then(function(){var g=t._dbInfo;g.db.transaction(function(v){ce(v,g,"DELETE FROM "+g.storeName+" WHERE key = ?",[e],function(){l()},function(w,b){s(b)})})}).catch(s)});return p(i,r),i}function lr(e){var r=this,t=new h(function(i,l){r.ready().then(function(){var s=r._dbInfo;s.db.transaction(function(g){ce(g,s,"DELETE FROM "+s.storeName,[],function(){i()},function(v,w){l(w)})})}).catch(l)});return p(t,e),t}function ur(e){var r=this,t=new h(function(i,l){r.ready().then(function(){var s=r._dbInfo;s.db.transaction(function(g){ce(g,s,"SELECT COUNT(key) as c FROM "+s.storeName,[],function(v,w){var b=w.rows.item(0).c;i(b)},function(v,w){l(w)})})}).catch(l)});return p(t,e),t}function dr(e,r){var t=this,i=new h(function(l,s){t.ready().then(function(){var g=t._dbInfo;g.db.transaction(function(v){ce(v,g,"SELECT key FROM "+g.storeName+" WHERE id = ? LIMIT 1",[e+1],function(w,b){var N=b.rows.length?b.rows.item(0).key:null;l(N)},function(w,b){s(b)})})}).catch(s)});return p(i,r),i}function fr(e){var r=this,t=new h(function(i,l){r.ready().then(function(){var s=r._dbInfo;s.db.transaction(function(g){ce(g,s,"SELECT key FROM "+s.storeName,[],function(v,w){for(var b=[],N=0;N<w.rows.length;N++)b.push(w.rows.item(N).key);i(b)},function(v,w){l(w)})})}).catch(l)});return p(t,e),t}function mr(e){return new h(function(r,t){e.transaction(function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(l,s){for(var g=[],v=0;v<s.rows.length;v++)g.push(s.rows.item(v).name);r({db:e,storeNames:g})},function(l,s){t(s)})},function(i){t(i)})})}function gr(e,r){r=C.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var i=this,l;return e.name?l=new h(function(s){var g;e.name===t.name?g=i._dbInfo.db:g=openDatabase(e.name,"","",0),e.storeName?s({db:g,storeNames:[e.storeName]}):s(mr(g))}).then(function(s){return new h(function(g,v){s.db.transaction(function(w){function b(B){return new h(function(U,H){w.executeSql("DROP TABLE IF EXISTS "+B,[],function(){U()},function(V,re){H(re)})})}for(var N=[],A=0,O=s.storeNames.length;A<O;A++)N.push(b(s.storeNames[A]));h.all(N).then(function(){g()}).catch(function(B){v(B)})},function(w){v(w)})})}):l=h.reject("Invalid arguments"),p(l,r),l}var hr={_driver:"webSQLStorage",_initStorage:or,_support:er(),iterate:sr,getItem:ar,setItem:ir,removeItem:cr,clear:lr,length:ur,key:dr,keys:fr,dropInstance:gr};function pr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Dt(e,r){var t=e.name+"/";return e.storeName!==r.storeName&&(t+=e.storeName+"/"),t}function vr(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function yr(){return!vr()||localStorage.length>0}function xr(e){var r=this,t={};if(e)for(var i in e)t[i]=e[i];return t.keyPrefix=Dt(e,r._defaultConfig),yr()?(r._dbInfo=t,t.serializer=$e,h.resolve()):h.reject()}function wr(e){var r=this,t=r.ready().then(function(){for(var i=r._dbInfo.keyPrefix,l=localStorage.length-1;l>=0;l--){var s=localStorage.key(l);s.indexOf(i)===0&&localStorage.removeItem(s)}});return p(t,e),t}function br(e,r){var t=this;e=j(e);var i=t.ready().then(function(){var l=t._dbInfo,s=localStorage.getItem(l.keyPrefix+e);return s&&(s=l.serializer.deserialize(s)),s});return p(i,r),i}function Dr(e,r){var t=this,i=t.ready().then(function(){for(var l=t._dbInfo,s=l.keyPrefix,g=s.length,v=localStorage.length,w=1,b=0;b<v;b++){var N=localStorage.key(b);if(N.indexOf(s)===0){var A=localStorage.getItem(N);if(A&&(A=l.serializer.deserialize(A)),A=e(A,N.substring(g),w++),A!==void 0)return A}}});return p(i,r),i}function Nr(e,r){var t=this,i=t.ready().then(function(){var l=t._dbInfo,s;try{s=localStorage.key(e)}catch{s=null}return s&&(s=s.substring(l.keyPrefix.length)),s});return p(i,r),i}function _r(e){var r=this,t=r.ready().then(function(){for(var i=r._dbInfo,l=localStorage.length,s=[],g=0;g<l;g++){var v=localStorage.key(g);v.indexOf(i.keyPrefix)===0&&s.push(v.substring(i.keyPrefix.length))}return s});return p(t,e),t}function jr(e){var r=this,t=r.keys().then(function(i){return i.length});return p(t,e),t}function Ir(e,r){var t=this;e=j(e);var i=t.ready().then(function(){var l=t._dbInfo;localStorage.removeItem(l.keyPrefix+e)});return p(i,r),i}function Cr(e,r,t){var i=this;e=j(e);var l=i.ready().then(function(){r===void 0&&(r=null);var s=r;return new h(function(g,v){var w=i._dbInfo;w.serializer.serialize(r,function(b,N){if(N)v(N);else try{localStorage.setItem(w.keyPrefix+e,b),g(s)}catch(A){(A.name==="QuotaExceededError"||A.name==="NS_ERROR_DOM_QUOTA_REACHED")&&v(A),v(A)}})})});return p(l,t),l}function Sr(e,r){if(r=C.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var i=this,l;return e.name?l=new h(function(s){e.storeName?s(Dt(e,i._defaultConfig)):s(e.name+"/")}).then(function(s){for(var g=localStorage.length-1;g>=0;g--){var v=localStorage.key(g);v.indexOf(s)===0&&localStorage.removeItem(v)}}):l=h.reject("Invalid arguments"),p(l,r),l}var Er={_driver:"localStorageWrapper",_initStorage:xr,_support:pr(),iterate:Dr,getItem:br,setItem:Cr,removeItem:Ir,clear:wr,length:jr,key:Nr,keys:_r,dropInstance:Sr},Pr=function(r,t){return r===t||typeof r=="number"&&typeof t=="number"&&isNaN(r)&&isNaN(t)},Ar=function(r,t){for(var i=r.length,l=0;l<i;){if(Pr(r[l],t))return!0;l++}return!1},Nt=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},xe={},_t={},me={INDEXEDDB:Zn,WEBSQL:hr,LOCALSTORAGE:Er},Rr=[me.INDEXEDDB._driver,me.WEBSQL._driver,me.LOCALSTORAGE._driver],Ne=["dropInstance"],ke=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ne),Fr={description:"",driver:Rr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Tr(e,r){e[r]=function(){var t=arguments;return e.ready().then(function(){return e[r].apply(e,t)})}}function Oe(){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var t in r)r.hasOwnProperty(t)&&(Nt(r[t])?arguments[0][t]=r[t].slice():arguments[0][t]=r[t])}return arguments[0]}var $r=function(){function e(r){y(this,e);for(var t in me)if(me.hasOwnProperty(t)){var i=me[t],l=i._driver;this[t]=l,xe[l]||this.defineDriver(i)}this._defaultConfig=Oe({},Fr),this._config=Oe({},this._defaultConfig,r),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":m(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var i in t){if(i==="storeName"&&(t[i]=t[i].replace(/\W/g,"_")),i==="version"&&typeof t[i]!="number")return new Error("Database version must be a number.");this._config[i]=t[i]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,i,l){var s=new h(function(g,v){try{var w=t._driver,b=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){v(b);return}for(var N=ke.concat("_initStorage"),A=0,O=N.length;A<O;A++){var B=N[A],U=!Ar(Ne,B);if((U||t[B])&&typeof t[B]!="function"){v(b);return}}var H=function(){for(var we=function(Lr){return function(){var Mr=new Error("Method "+Lr+" is not implemented by the current driver"),jt=h.reject(Mr);return p(jt,arguments[arguments.length-1]),jt}},Le=0,Or=Ne.length;Le<Or;Le++){var Me=Ne[Le];t[Me]||(t[Me]=we(Me))}};H();var V=function(we){xe[w]&&console.info("Redefining LocalForage driver: "+w),xe[w]=t,_t[w]=we,g()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(V,v):V(!!t._support):V(!0)}catch(re){v(re)}});return $(s,i,l),s},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,i,l){var s=xe[t]?h.resolve(xe[t]):h.reject(new Error("Driver not found."));return $(s,i,l),s},e.prototype.getSerializer=function(t){var i=h.resolve($e);return $(i,t),i},e.prototype.ready=function(t){var i=this,l=i._driverSet.then(function(){return i._ready===null&&(i._ready=i._initDriver()),i._ready});return $(l,t,t),l},e.prototype.setDriver=function(t,i,l){var s=this;Nt(t)||(t=[t]);var g=this._getSupportedDrivers(t);function v(){s._config.driver=s.driver()}function w(A){return s._extend(A),v(),s._ready=s._initStorage(s._config),s._ready}function b(A){return function(){var O=0;function B(){for(;O<A.length;){var U=A[O];return O++,s._dbInfo=null,s._ready=null,s.getDriver(U).then(w).catch(B)}v();var H=new Error("No available storage method found.");return s._driverSet=h.reject(H),s._driverSet}return B()}}var N=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=N.then(function(){var A=g[0];return s._dbInfo=null,s._ready=null,s.getDriver(A).then(function(O){s._driver=O._driver,v(),s._wrapLibraryMethodsWithReady(),s._initDriver=b(g)})}).catch(function(){v();var A=new Error("No available storage method found.");return s._driverSet=h.reject(A),s._driverSet}),$(this._driverSet,i,l),this._driverSet},e.prototype.supports=function(t){return!!_t[t]},e.prototype._extend=function(t){Oe(this,t)},e.prototype._getSupportedDrivers=function(t){for(var i=[],l=0,s=t.length;l<s;l++){var g=t[l];this.supports(g)&&i.push(g)}return i},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,i=ke.length;t<i;t++)Tr(this,ke[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),kr=new $r;d.exports=kr},{3:3}]},{},[4])(4)})})(Mt);var So=Mt.exports;const te=Ur(So);te.config({name:"DocFlowLite",storeName:"documents",description:"Storage for DocFlow Lite documents"});async function qe(n){const a=`doc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,c=await Po(n),d={id:a,name:n.name,type:n.type,size:n.size,lastModified:n.lastModified,createdAt:Date.now()};return await te.setItem(`file:${a}`,c),await te.setItem(`meta:${a}`,d),await Ao(a),d}async function Ce(){const n=await Xe();console.log("Document list from storage:",n);const a=[];for(const c of n){const d=await te.getItem(`meta:${c}`);d&&a.push(d)}return console.log("Retrieved documents:",a),a}async function he(n){const a=await te.getItem(`meta:${n}`),c=await te.getItem(`file:${n}`);return!a||!c?null:{meta:a,data:c}}async function Eo(n){try{return await te.removeItem(`file:${n}`),await te.removeItem(`meta:${n}`),await Ro(n),!0}catch(a){return console.error("Error deleting document:",a),!1}}function Po(n){return new Promise((a,c)=>{const d=new FileReader;d.onload=()=>a(d.result),d.onerror=c,d.readAsArrayBuffer(n)})}async function Xe(){return await te.getItem("documentList")||[]}async function Ao(n){const a=await Xe();console.log("Current document list before adding:",a),a.includes(n)||(a.push(n),await te.setItem("documentList",a),console.log("Updated document list after adding:",a))}async function Ro(n){const c=(await Xe()).filter(d=>d!==n);await te.setItem("documentList",c)}function Fo(n){return new Date(n).toLocaleDateString()}function To(n){return n<1024?n+" B":n<1048576?(n/1024).toFixed(2)+" KB":(n/1048576).toFixed(2)+" MB"}function Ie(n){const a=n.lastIndexOf(".");return a===-1?n:n.substring(0,a)}function $o({onUploadComplete:n,acceptedFileTypes:a=["application/pdf","image/*"]}){const[c,d]=D.useState(!1),[u,m]=D.useState(!1),[y,x]=D.useState(0),[I,E]=D.useState(null),S=D.useRef(null),h=D.useCallback(R=>{R.preventDefault(),R.stopPropagation(),d(!0)},[]),p=D.useCallback(R=>{R.preventDefault(),R.stopPropagation(),d(!1)},[]),$=D.useCallback(async R=>{if(!R||R.length===0)return;m(!0),x(0),R.length;let T=0,X=[];for(let M=0;M<R.length;M++){const f=R[M];if(!a.some(P=>{if(P.endsWith("/*")){const k=P.split("/")[0];return f.type.startsWith(`${k}/`)}return f.type===P})){L.error(`File type not supported: ${f.type}`);continue}try{E(f.name);const P=setInterval(()=>{x(z=>{const G=z+Math.random()*10;return G>90?90:G})},200),k=await qe(f);k&&X.push(k),clearInterval(P),x(100),T++,await new Promise(z=>setTimeout(z,500))}catch(P){console.error("Error uploading file:",P),L.error(`Failed to upload ${f.name}`)}}setTimeout(()=>{m(!1),x(0),E(null),T>0&&(L.success(`Uploaded ${T} file${T>1?"s":""}`),console.log("Upload complete, calling onUploadComplete()"),n())},500)},[a,n]),j=D.useCallback(R=>{R.preventDefault(),R.stopPropagation(),d(!1);const{files:T}=R.dataTransfer;$(T)},[$]),C=D.useCallback(R=>{const{files:T}=R.target;$(T),S.current&&(S.current.value="")},[$]),_=D.useCallback(()=>{S.current&&S.current.click()},[]);return o.jsxs("div",{className:"mb-6",children:[o.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${c?"border-blue-500 bg-blue-50 dark:bg-blue-950":"border-gray-300 dark:border-gray-700"}`,onDragOver:h,onDragLeave:p,onDrop:j,onClick:u?void 0:_,children:u?o.jsxs("div",{className:"py-4",children:[o.jsxs("p",{className:"mb-2 text-sm text-gray-600 dark:text-gray-400",children:["Uploading ",I]}),o.jsx(He,{value:y,className:"h-2 mb-2"}),o.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[y.toFixed(0),"%"]})]}):o.jsxs("div",{className:"py-6",children:[o.jsx(yo,{className:"mx-auto h-12 w-12 text-gray-400"}),o.jsx("p",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-200",children:"Drag and drop files here, or click to select files"}),o.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Supported formats: PDF, PNG, JPEG, WebP"})]})}),o.jsx("input",{type:"file",ref:S,className:"hidden",multiple:!0,accept:a.join(","),onChange:C})]})}const Et={"application/pdf":["image/png","image/jpeg"],"image/png":["application/pdf","image/jpeg"],"image/jpeg":["application/pdf","image/png"],"image/webp":["application/pdf","image/png","image/jpeg"]};class Z extends Error{constructor(a){super(a),this.name="ConversionError"}}function ko(n,a){if(!Object.keys(Et).includes(n))throw new Z(`Unsupported source format: ${n}`);if(!(Et[n]||[]).includes(a))throw new Z(`Conversion from ${n} to ${a} is not supported`)}function Bt(n,a){return new Promise((c,d)=>{try{const u=new Blob([n],{type:a}),m=URL.createObjectURL(u),y=new Image;y.onload=()=>{URL.revokeObjectURL(m),c(y)},y.onerror=()=>{URL.revokeObjectURL(m),d(new Z(`Failed to load image of type ${a}`))},y.src=m}catch(u){d(new Z(`Failed to create image from buffer: ${u instanceof Error?u.message:String(u)}`))}})}async function Oo(n,a){try{if(a.type==="application/pdf")return new Blob([n],{type:"application/pdf"});if(a.type.startsWith("image/"))return await Lo(n,a);throw new Z(`Conversion from ${a.type} to PDF is not supported`)}catch(c){throw c instanceof Z?c:(console.error("PDF conversion error:",c),new Z(`Failed to convert to PDF: ${c instanceof Error?c.message:String(c)}`))}}async function Lo(n,a){try{const c=await Bt(n,a.type),d=document.createElement("canvas"),u=d.getContext("2d");if(!u)throw new Z("Failed to get canvas context");d.width=c.width,d.height=c.height,u.drawImage(c,0,0);const m=d.toDataURL("image/jpeg",.95),y=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>${a.name}</title>
        <style>
          body { margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; height: 100vh; }
          img { max-width: 100%; max-height: 100vh; object-fit: contain; }
        </style>
      </head>
      <body>
        <img src="${m}" alt="${a.name}" />
      </body>
      </html>
    `,x=new Blob([y],{type:"text/html"}),I=m.split(",")[1],E=atob(I),S=new Uint8Array(E.length);for(let j=0;j<E.length;j++)S[j]=E.charCodeAt(j);const h=`%PDF-1.5
1 0 obj
<< /Type /Catalog /Pages 2 0 R >>
endobj
2 0 obj
<< /Type /Pages /Kids [3 0 R] /Count 1 >>
endobj
3 0 obj
<< /Type /Page /Parent 2 0 R /MediaBox [0 0 ${c.width} ${c.height}] /Resources << /XObject << /Image 4 0 R >> >> /Contents 5 0 R >>
endobj
4 0 obj
<< /Type /XObject /Subtype /Image /Width ${c.width} /Height ${c.height} /ColorSpace /DeviceRGB /BitsPerComponent 8 /Filter /DCTDecode /Length ${S.length} >>
stream
`,p=`
endstream
endobj
5 0 obj
<< /Length 44 >>
stream
q
${c.width} 0 0 ${c.height} 0 0 cm
/Image Do
Q
endstream
endobj
xref
0 6
0000000000 65535 f
0000000010 00000 n
0000000059 00000 n
0000000116 00000 n
0000000266 00000 n
0000000${266+S.length+100} 00000 n
trailer
<< /Size 6 /Root 1 0 R >>
startxref
0000000${266+S.length+200}
%%EOF`;return new Blob([h,S,p],{type:"application/pdf"})}catch(c){throw console.error("Error creating PDF from image:",c),new Z(`Failed to create PDF from image: ${c instanceof Error?c.message:String(c)}`)}}async function Pt(n,a,c,d={}){try{ko(a.type,c);const u=c.split("/")[1],y=`${a.name.split(".").slice(0,-1).join(".")}.${u}`;let x;c==="application/pdf"&&(x=await Oo(n,a));const I=new File([x],y,{type:c}),E=await qe(I);return c==="application/pdf"&&(E.metadata={isGeneratedDocument:!0,sourceDocumentId:a.id,sourceDocumentName:a.name,sourceDocumentType:a.type,conversionTimestamp:Date.now()},await te.setItem(`meta:${E.id}`,E)),E}catch(u){throw u instanceof Z?u:(console.error("Conversion error:",u),new Z(`Failed to convert document: ${u instanceof Error?u.message:String(u)}`))}}async function Mo(n,a){try{const c=n.filter(f=>f.meta.type.startsWith("image/"));if(c.length===0)throw new Z("No image documents provided for merging");const d=[];for(const f of c)try{const F=await Bt(f.data,f.meta.type);d.push(F)}catch(F){console.error(`Failed to load image ${f.meta.name}:`,F)}if(d.length===0)throw new Z("Failed to load any images for merging");let u=`%PDF-1.7
1 0 obj
<< /Type /Catalog /Pages 2 0 R >>
endobj
2 0 obj
<< /Type /Pages /Kids [`;for(let f=0;f<d.length;f++)u+=`${3+f*3} 0 R `;u+=`] /Count ${d.length} >>
endobj
`;let m=3;const y=[0,u.indexOf("1 0 obj"),u.indexOf("2 0 obj")],x=[];for(let f=0;f<d.length;f++){const F=d[f],P=document.createElement("canvas"),k=P.getContext("2d");if(!k)throw new Z("Failed to get canvas context");P.width=F.width,P.height=F.height,k.drawImage(F,0,0);const G=P.toDataURL("image/jpeg",.95).split(",")[1],K=atob(G),q=new Uint8Array(K.length);for(let Q=0;Q<K.length;Q++)q[Q]=K.charCodeAt(Q);x.push(q),y.push(u.length),u+=`${m} 0 obj
<< /Type /Page /Parent 2 0 R /MediaBox [0 0 ${F.width} ${F.height}] /Resources << /XObject << /Image${f} ${m+1} 0 R >> >> /Contents ${m+2} 0 R >>
endobj
`,m++,y.push(u.length),u+=`${m} 0 obj
<< /Type /XObject /Subtype /Image /Width ${F.width} /Height ${F.height} /ColorSpace /DeviceRGB /BitsPerComponent 8 /Filter /DCTDecode /Length ${q.length} >>
stream
`,m++,y.push(u.length+q.length+10),u+=`endstream
endobj
${m} 0 obj
<< /Length 44 >>
stream
q
${F.width} 0 0 ${F.height} 0 0 cm
/Image${f} Do
Q
endstream
endobj
`,m++}const I=u.length;u+=`xref
0 ${m}
0000000000 65535 f
`;for(let f=1;f<m;f++){const P=y[f].toString().padStart(10,"0");u+=`${P} 00000 n
`}u+=`trailer
<< /Size ${m} /Root 1 0 R >>
startxref
${I}
%%EOF`;const E=[u];let S="",h=0;const p=[];let $=0;for(;;){const f=u.indexOf(`stream
`,$);if(f===-1)break;const F=u.indexOf("endstream",f);if(F===-1)break;const P=u.lastIndexOf("obj",f);P!==-1&&u.substring(P,f).includes("/DCTDecode")&&p.push({start:f+7,end:F}),$=F+9}let j=0,C=[];for(let f=0;f<p.length;f++){const{start:F,end:P}=p[f];C.push(u.substring(h,F)),C.push(x[j]),h=P,j++}C.push(u.substring(h));const _=new Blob(C,{type:"application/pdf"}),T=`merged-images-${new Date().toISOString().replace(/[:.]/g,"-")}.pdf`,X=new File([_],T,{type:"application/pdf"}),M=await qe(X);return a&&Object.keys(a).length>0&&(M.metadata=a,await te.setItem(`meta:${M.id}`,M)),M}catch(c){throw c instanceof Z?c:(console.error("PDF merge error:",c),new Z(`Failed to merge images to PDF: ${c instanceof Error?c.message:String(c)}`))}}function Bo({className:n,...a}){return o.jsx("div",{"data-slot":"card",className:Y("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",n),...a})}function Uo({className:n,...a}){return o.jsx("div",{"data-slot":"skeleton",className:Y("bg-primary/10 animate-pulse rounded-md",n),...a})}function zo({document:n,isSelected:a,onToggleSelect:c,onView:d,onDownload:u,onDelete:m,onShare:y,onConvert:x}){const[I,E]=D.useState(!1),S=n.type==="application/pdf",h=n.type.startsWith("image/"),p=()=>S?o.jsx(Ue,{className:"h-6 w-6 text-blue-500"}):h?o.jsx(ro,{className:"h-6 w-6 text-green-500"}):o.jsx(It,{className:"h-6 w-6 text-gray-500"});return o.jsx(Bo,{className:`p-4 relative card-hover-effect transition-all ${a?"border-blue-500 bg-blue-50 dark:bg-blue-950":""} ${I?"shadow-md":"shadow-sm"}`,onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"flex-shrink-0 cursor-pointer mt-1",onClick:()=>c(n.id),"aria-label":a?"Deselect document":"Select document",children:a?o.jsx(Ft,{className:"h-5 w-5 text-blue-500"}):o.jsx(Tt,{className:"h-5 w-5 text-gray-400"})}),o.jsx("div",{className:"flex-shrink-0 mt-1",children:p()}),o.jsxs("div",{className:"flex-grow min-w-0",children:[o.jsx("div",{className:"font-medium text-base truncate cursor-pointer hover:text-blue-600 dark:hover:text-blue-400",onClick:()=>d(n.id),title:n.name,children:n.name}),o.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[To(n.size)," • ",Fo(n.lastModified)]}),o.jsxs("div",{className:"flex mt-3 gap-1",children:[o.jsxs(J,{variant:"ghost",size:"icon",className:"h-8 w-8 cursor-pointer rounded-full",onClick:()=>d(n.id),title:"View document",children:[o.jsx(It,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"View"})]}),o.jsxs(J,{variant:"ghost",size:"icon",className:"h-8 w-8 cursor-pointer rounded-full",onClick:()=>u(n.id),title:"Download document",children:[o.jsx(Rt,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Download"})]}),o.jsxs(J,{variant:"ghost",size:"icon",className:"h-8 w-8 cursor-pointer rounded-full",onClick:()=>y(n.id),title:"Share document",children:[o.jsx(fo,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Share"})]}),o.jsxs(J,{variant:"ghost",size:"icon",className:"h-8 w-8 cursor-pointer rounded-full text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-950",onClick:()=>m(n.id),title:"Delete document",children:[o.jsx(po,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Delete"})]}),!S&&o.jsxs(J,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs cursor-pointer",onClick:()=>x(n),title:"Convert to PDF",children:[o.jsx(Ue,{className:"h-4 w-4 mr-1"}),"PDF"]})]})]})]})})}function Wo({documents:n,selectedDocIds:a,onSelectAll:c,onConvertToPdf:d,onMergeImages:u,hasImageSelection:m,hasNonPdfSelection:y}){const x=n.length>0&&a.length===n.length;a.length>0;const I=m&&a.length>=2;return o.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[o.jsxs(J,{variant:"outline",size:"sm",onClick:c,className:"flex items-center gap-1",title:x?"Deselect all documents":"Select all documents",children:[x?o.jsx(Ft,{className:"h-4 w-4"}):o.jsx(Tt,{className:"h-4 w-4"}),x?"Deselect All":"Select All"]}),o.jsxs(J,{variant:"outline",size:"sm",onClick:d,disabled:!y,className:"flex items-center gap-1",title:y?"Convert selected documents to PDF":"Select non-PDF documents to convert",children:[o.jsx(Ue,{className:"h-4 w-4"}),"Convert to PDF"]}),o.jsxs(J,{variant:"outline",size:"sm",onClick:u,disabled:!I,className:"flex items-center gap-1",title:I?"Merge selected images into a single PDF":"Select at least 2 images to merge",children:[o.jsx(lo,{className:"h-4 w-4"}),"Merge Images"]})]})}function Ut(){const[n,a]=D.useState([]),[c,d]=D.useState(!0),[u,m]=D.useState([]);D.useEffect(()=>{y()},[]);const y=D.useCallback(async()=>{d(!0);try{a([]),await new Promise(_=>setTimeout(_,50));const j=await Ce();console.log("Loaded documents:",j.length);const C=[...j].sort((_,R)=>{const T=_.name.startsWith("merged-images-")||_.metadata&&(_.metadata.isMergedDocument||_.metadata.isGeneratedDocument),X=R.name.startsWith("merged-images-")||R.metadata&&(R.metadata.isMergedDocument||R.metadata.isGeneratedDocument);return T&&!X?1:!T&&X?-1:T&&X?(_.createdAt||0)-(R.createdAt||0):(R.createdAt||0)-(_.createdAt||0)});a(C)}catch(j){console.error("Error loading documents:",j),L.error("Failed to load documents")}finally{d(!1)}},[]),x=D.useCallback(async j=>{try{const C=await he(j);if(!C)return L.error("Document not found"),null;const _=new Blob([C.data],{type:C.meta.type}),R=URL.createObjectURL(_);return{meta:C.meta,url:R}}catch(C){return console.error("Error viewing document:",C),L.error("Failed to load document"),null}},[]),I=D.useCallback(async j=>{try{const C=await he(j);if(!C)return L.error("Document not found"),!1;const _=new Blob([C.data],{type:C.meta.type}),R=URL.createObjectURL(_),T=document.createElement("a");return T.href=R,T.download=C.meta.name,document.body.appendChild(T),T.click(),setTimeout(()=>{document.body.removeChild(T),URL.revokeObjectURL(R)},100),L.success("Document download started"),!0}catch(C){return console.error("Error downloading document:",C),L.error("Failed to download document"),!1}},[]),E=D.useCallback(async j=>{try{return await Eo(j)?(a(_=>_.filter(R=>R.id!==j)),m(_=>_.filter(R=>R!==j)),L.success("Document deleted successfully"),!0):(L.error("Failed to delete document"),!1)}catch(C){return console.error("Error deleting document:",C),L.error("Failed to delete document"),!1}},[]),S=D.useCallback(async j=>{try{const C=await he(j);if(!C)return L.error("Document not found"),!1;if(navigator.share){const _=new Blob([C.data],{type:C.meta.type}),R=new File([_],C.meta.name,{type:C.meta.type});return await navigator.share({title:C.meta.name,files:[R]}),L.success("Document shared successfully"),!0}else return L.error("Sharing is not supported in this browser"),!1}catch(C){return console.error("Error sharing document:",C),C instanceof DOMException&&C.name==="AbortError"||L.error("Failed to share document"),!1}},[]),h=D.useCallback(j=>{m(C=>C.includes(j)?C.filter(_=>_!==j):[...C,j])},[]),p=D.useCallback(()=>{u.length===n.length?m([]):m(n.map(j=>j.id))},[n,u]),$=D.useCallback(()=>{m([])},[]);return{documents:n,isLoading:c,selectedDocIds:u,loadDocuments:y,viewDocument:x,downloadDocument:I,removeDocument:E,shareDocument:S,toggleDocumentSelection:h,selectAllDocuments:p,clearSelection:$}}function Ke(n){const[a,c]=D.useState(!1),[d,u]=D.useState(0),m=D.useCallback(async S=>{const h=await Ce(),p=Ie(S.name);return!!h.find(j=>j.type==="application/pdf"&&Ie(j.name)===p)},[]),y=D.useCallback(async S=>{const h=await Ce(),p=Ie(S.name);return h.find(j=>j.type==="application/pdf"&&Ie(j.name)===p)||null},[]),x=D.useCallback(async S=>{if(S.type==="application/pdf")return L.info("Document is already a PDF"),!1;const h=await y(S);if(h)return L.info(`A PDF version already exists: ${h.name}`),!1;c(!0),u(0);try{const p=setInterval(()=>{u(C=>{const _=C+Math.random()*10;return _>90?90:_})},200),$=await he(S.id);if(!$)throw new Error("Document not found");const j=await Pt($.data,S,"application/pdf",{quality:.95});return clearInterval(p),u(100),L.success(`Converted ${S.name} to PDF`),n&&n(),!0}catch(p){return console.error("Error converting document:",p),L.error(`Failed to convert ${S.name} to PDF`),!1}finally{setTimeout(()=>{c(!1),u(0)},500)}},[n,y]),I=D.useCallback(async S=>{const h=S.filter(j=>j.type!=="application/pdf");if(h.length===0)return L.info("All selected documents are already PDFs"),!1;const p=[],$=[];for(const j of h)await y(j)?p.push(j.name):$.push(j);if($.length===0)return L.info("PDF versions of all selected documents already exist"),!1;if(p.length>0){const j=`Skipping ${p.length} document(s) that already have PDF versions`;if(p.length<=3){const C=p.join(", ");L.info(`${j}: ${C}`)}else L.info(j)}c(!0),u(0);try{const j=setInterval(()=>{u(C=>{const _=C+Math.random()*5;return _>90?90:_})},200);for(const C of $){const _=await he(C.id);if(!_){console.warn(`Document ${C.id} not found, skipping`);continue}await Pt(_.data,C,"application/pdf")}return clearInterval(j),u(100),L.success(`Converted ${$.length} documents to PDF`),n&&n(),!0}catch(j){return console.error("Error batch converting documents:",j),L.error("Failed to convert some documents to PDF"),!1}finally{setTimeout(()=>{c(!1),u(0)},500)}},[n,y]),E=D.useCallback(async S=>{const h=S.filter(_=>_.type.startsWith("image/"));if(h.length<2)return L.error("Please select at least 2 images to merge"),!1;console.log("Starting merge process with images:",h.map(_=>_.name));const p=[...h].sort((_,R)=>_.id.localeCompare(R.id)).map(_=>_.id),$=p.join("_");console.log("Generated merge set identifier:",$);const j=await Ce();console.log("Checking against existing documents:",j.length);const C=j.filter(_=>_.type==="application/pdf"&&(_.name.startsWith("merged-images-")||_.metadata&&_.metadata.isMergedDocument));console.log("Found existing merged PDFs:",C.length);for(const _ of C)if(console.log("Checking document:",_.name,"Metadata:",_.metadata),_.metadata&&_.metadata.sourceImageIds){const R=_.metadata.sourceImageIds;if(R.length!==p.length)continue;const T=[...R].sort((M,f)=>M.localeCompare(f)),X=p.length===T.length&&p.every((M,f)=>M===T[f]);if(console.log("Comparing identifiers:",{existing:T.join("_"),current:$,match:X}),X)return L.info(`A PDF with these exact images already exists: ${_.name}`),!1}c(!0),u(0);try{const _=setInterval(()=>{u(M=>{const f=M+Math.random()*5;return f>90?90:f})},200),R=[];for(const M of h){const f=await he(M.id);if(!f){console.warn(`Document ${M.id} not found, skipping`);continue}R.push({meta:M,data:f.data})}if(R.length<2)throw new Error("Not enough valid images to merge");const T={sourceImageIds:h.map(M=>M.id),mergeSetIdentifier:$,isMergedDocument:!0,createdAt:Date.now()};console.log("Creating merged PDF with metadata:",T);const X=await Mo(R,T);return console.log("Merged PDF created:",X),clearInterval(_),u(100),L.success("Images merged into PDF successfully"),n&&n(),!0}catch(_){return console.error("Error merging images to PDF:",_),L.error("Failed to merge images to PDF"),!1}finally{setTimeout(()=>{c(!1),u(0)},500)}},[n]);return{isConverting:a,conversionProgress:d,convertToPDF:x,batchConvertToPDF:I,mergeImages:E,checkForExistingPDF:m,getExistingPDFDocument:y}}var Qe="Dialog",[zt,Wt]=ze(Qe),[Vo,oe]=zt(Qe),Vt=n=>{const{__scopeDialog:a,children:c,open:d,defaultOpen:u,onOpenChange:m,modal:y=!0}=n,x=D.useRef(null),I=D.useRef(null),[E=!1,S]=Xr({prop:d,defaultProp:u,onChange:m});return o.jsx(Vo,{scope:a,triggerRef:x,contentRef:I,contentId:Be(),titleId:Be(),descriptionId:Be(),open:E,onOpenChange:S,onOpenToggle:D.useCallback(()=>S(h=>!h),[S]),modal:y,children:c})};Vt.displayName=Qe;var Yt="DialogTrigger",Gt=D.forwardRef((n,a)=>{const{__scopeDialog:c,...d}=n,u=oe(Yt,c),m=be(a,u.triggerRef);return o.jsx(de.button,{type:"button","aria-haspopup":"dialog","aria-expanded":u.open,"aria-controls":u.contentId,"data-state":et(u.open),...d,ref:m,onClick:ge(n.onClick,u.onOpenToggle)})});Gt.displayName=Yt;var Je="DialogPortal",[Yo,Ht]=zt(Je,{forceMount:void 0}),qt=n=>{const{__scopeDialog:a,forceMount:c,children:d,container:u}=n,m=oe(Je,a);return o.jsx(Yo,{scope:a,forceMount:c,children:D.Children.map(d,y=>o.jsx(We,{present:c||m.open,children:o.jsx(Wr,{asChild:!0,container:u,children:y})}))})};qt.displayName=Je;var Ee="DialogOverlay",Xt=D.forwardRef((n,a)=>{const c=Ht(Ee,n.__scopeDialog),{forceMount:d=c.forceMount,...u}=n,m=oe(Ee,n.__scopeDialog);return m.modal?o.jsx(We,{present:d||m.open,children:o.jsx(Go,{...u,ref:a})}):null});Xt.displayName=Ee;var Go=D.forwardRef((n,a)=>{const{__scopeDialog:c,...d}=n,u=oe(Ee,c);return o.jsx(Vr,{as:Kr,allowPinchZoom:!0,shards:[u.contentRef],children:o.jsx(de.div,{"data-state":et(u.open),...d,ref:a,style:{pointerEvents:"auto",...d.style}})})}),ue="DialogContent",Kt=D.forwardRef((n,a)=>{const c=Ht(ue,n.__scopeDialog),{forceMount:d=c.forceMount,...u}=n,m=oe(ue,n.__scopeDialog);return o.jsx(We,{present:d||m.open,children:m.modal?o.jsx(Ho,{...u,ref:a}):o.jsx(qo,{...u,ref:a})})});Kt.displayName=ue;var Ho=D.forwardRef((n,a)=>{const c=oe(ue,n.__scopeDialog),d=D.useRef(null),u=be(a,c.contentRef,d);return D.useEffect(()=>{const m=d.current;if(m)return Yr(m)},[]),o.jsx(Qt,{...n,ref:u,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(n.onCloseAutoFocus,m=>{var y;m.preventDefault(),(y=c.triggerRef.current)==null||y.focus()}),onPointerDownOutside:ge(n.onPointerDownOutside,m=>{const y=m.detail.originalEvent,x=y.button===0&&y.ctrlKey===!0;(y.button===2||x)&&m.preventDefault()}),onFocusOutside:ge(n.onFocusOutside,m=>m.preventDefault())})}),qo=D.forwardRef((n,a)=>{const c=oe(ue,n.__scopeDialog),d=D.useRef(!1),u=D.useRef(!1);return o.jsx(Qt,{...n,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:m=>{var y,x;(y=n.onCloseAutoFocus)==null||y.call(n,m),m.defaultPrevented||(d.current||(x=c.triggerRef.current)==null||x.focus(),m.preventDefault()),d.current=!1,u.current=!1},onInteractOutside:m=>{var I,E;(I=n.onInteractOutside)==null||I.call(n,m),m.defaultPrevented||(d.current=!0,m.detail.originalEvent.type==="pointerdown"&&(u.current=!0));const y=m.target;((E=c.triggerRef.current)==null?void 0:E.contains(y))&&m.preventDefault(),m.detail.originalEvent.type==="focusin"&&u.current&&m.preventDefault()}})}),Qt=D.forwardRef((n,a)=>{const{__scopeDialog:c,trapFocus:d,onOpenAutoFocus:u,onCloseAutoFocus:m,...y}=n,x=oe(ue,c),I=D.useRef(null),E=be(a,I);return Gr(),o.jsxs(o.Fragment,{children:[o.jsx(Hr,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:u,onUnmountAutoFocus:m,children:o.jsx(qr,{role:"dialog",id:x.contentId,"aria-describedby":x.descriptionId,"aria-labelledby":x.titleId,"data-state":et(x.open),...y,ref:E,onDismiss:()=>x.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(Ko,{titleId:x.titleId}),o.jsx(Jo,{contentRef:I,descriptionId:x.descriptionId})]})]})}),Ze="DialogTitle",Jt=D.forwardRef((n,a)=>{const{__scopeDialog:c,...d}=n,u=oe(Ze,c);return o.jsx(de.h2,{id:u.titleId,...d,ref:a})});Jt.displayName=Ze;var Zt="DialogDescription",en=D.forwardRef((n,a)=>{const{__scopeDialog:c,...d}=n,u=oe(Zt,c);return o.jsx(de.p,{id:u.descriptionId,...d,ref:a})});en.displayName=Zt;var tn="DialogClose",nn=D.forwardRef((n,a)=>{const{__scopeDialog:c,...d}=n,u=oe(tn,c);return o.jsx(de.button,{type:"button",...d,ref:a,onClick:ge(n.onClick,()=>u.onOpenChange(!1))})});nn.displayName=tn;function et(n){return n?"open":"closed"}var rn="DialogTitleWarning",[Xo,on]=zr(rn,{contentName:ue,titleName:Ze,docsSlug:"dialog"}),Ko=({titleId:n})=>{const a=on(rn),c=`\`${a.contentName}\` requires a \`${a.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${a.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${a.docsSlug}`;return D.useEffect(()=>{n&&(document.getElementById(n)||console.error(c))},[c,n]),null},Qo="DialogDescriptionWarning",Jo=({contentRef:n,descriptionId:a})=>{const d=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${on(Qo).contentName}}.`;return D.useEffect(()=>{var m;const u=(m=n.current)==null?void 0:m.getAttribute("aria-describedby");a&&u&&(document.getElementById(a)||console.warn(d))},[d,n,a]),null},an=Vt,Zo=Gt,tt=qt,nt=Xt,rt=Kt,sn=Jt,cn=en,Pe=nn;function ot({...n}){return o.jsx(an,{"data-slot":"dialog",...n})}function ea({...n}){return o.jsx(tt,{"data-slot":"dialog-portal",...n})}function ta({...n}){return o.jsx(Pe,{"data-slot":"dialog-close",...n})}function na({className:n,...a}){return o.jsx(nt,{"data-slot":"dialog-overlay",className:Y("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",n),...a})}function ln({className:n,children:a,...c}){return o.jsxs(ea,{"data-slot":"dialog-portal",children:[o.jsx(na,{}),o.jsxs(rt,{"data-slot":"dialog-content",className:Y("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),...c,children:[a,o.jsxs(Pe,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[o.jsx(Ve,{}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function un({className:n,...a}){return o.jsx("div",{"data-slot":"dialog-header",className:Y("flex flex-col gap-2 text-center sm:text-left",n),...a})}function dn({className:n,...a}){return o.jsx("div",{"data-slot":"dialog-footer",className:Y("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n),...a})}function at({className:n,...a}){return o.jsx(sn,{"data-slot":"dialog-title",className:Y("text-lg leading-none font-semibold",n),...a})}function fn({className:n,...a}){return o.jsx(cn,{"data-slot":"dialog-description",className:Y("text-muted-foreground text-sm",n),...a})}const ra=Qr("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-background text-foreground",destructive:"text-destructive-foreground [&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/80"}},defaultVariants:{variant:"default"}});function mn({className:n,variant:a,...c}){return o.jsx("div",{"data-slot":"alert",role:"alert",className:Y(ra({variant:a}),n),...c})}function gn({className:n,...a}){return o.jsx("div",{"data-slot":"alert-title",className:Y("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",n),...a})}function hn({className:n,...a}){return o.jsx("div",{"data-slot":"alert-description",className:Y("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",n),...a})}function oa({open:n,documents:a,selectedDocIds:c,onOpenChange:d,onConversionComplete:u}){const[m,y]=D.useState(!1),{isConverting:x,conversionProgress:I,batchConvertToPDF:E}=Ke(()=>{u(),setTimeout(()=>{y(!1),d(!1)},1e3)}),S=a.filter(p=>c.includes(p.id)&&p.type!=="application/pdf"),h=async()=>{if(c.length===0){L.error("No documents selected for conversion");return}if(S.length===0){L.info("All selected documents are already in PDF format"),d(!1);return}y(!0);try{await E(S)||y(!1)}catch(p){console.error("Error batch converting documents:",p),L.error("Failed to convert documents"),y(!1)}};return o.jsx(ot,{open:n,onOpenChange:p=>{!x&&!m&&d(p)},children:o.jsxs(ln,{className:"max-w-md",children:[o.jsxs(un,{children:[o.jsx(at,{children:"Batch Convert to PDF"}),o.jsxs(fn,{children:["Convert ",S.length," document(s) to PDF format"]})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs(mn,{children:[o.jsx(gn,{children:"Information"}),o.jsxs(hn,{children:["This will convert all selected non-PDF documents to PDF format.",a.filter(p=>c.includes(p.id)&&p.type==="application/pdf").length>0&&` ${a.filter(p=>c.includes(p.id)&&p.type==="application/pdf").length} document(s) are already in PDF format and will be skipped.`]})]}),x&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{children:"Converting..."}),o.jsxs("span",{children:[Math.round(I),"%"]})]}),o.jsx(He,{value:I,className:"h-2"})]})]}),o.jsxs(dn,{children:[o.jsx(J,{variant:"outline",onClick:()=>d(!1),disabled:x||m,children:"Cancel"}),o.jsx(J,{onClick:h,disabled:x||m||S.length===0,children:"Convert to PDF"})]})]})})}function aa({open:n,documents:a,selectedDocIds:c,onOpenChange:d,onMergeComplete:u}){const[m,y]=D.useState(!1),{isConverting:x,conversionProgress:I,mergeImages:E}=Ke(()=>{u(),setTimeout(()=>{y(!1),d(!1)},1e3)}),S=a.filter(p=>c.includes(p.id)&&p.type.startsWith("image/")),h=async()=>{if(c.length<2){L.error("Select at least two images to merge");return}if(S.length<2){L.info("Select at least two images to merge"),d(!1);return}y(!0);try{await E(S)||y(!1)}catch(p){console.error("Error merging images:",p),L.error("Failed to merge images"),y(!1)}};return o.jsx(ot,{open:n,onOpenChange:p=>{!x&&!m&&d(p)},children:o.jsxs(ln,{className:"max-w-md rounded-lg",children:[o.jsxs(un,{className:"pb-2",children:[o.jsx(at,{className:"text-xl",children:"Merge Images to PDF"}),o.jsx(fn,{className:"text-sm text-muted-foreground",children:"Combine multiple images into a single PDF document"})]}),o.jsxs("div",{className:"py-4",children:[o.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["You are about to merge ",S.length," images into a single PDF document."]}),o.jsxs("div",{className:"space-y-1 mb-4",children:[o.jsx("p",{className:"text-sm font-medium",children:"Selected images:"}),o.jsx("ul",{className:"text-sm text-muted-foreground max-h-40 overflow-y-auto border rounded-md p-2 bg-gray-50 dark:bg-gray-900",children:S.map(p=>o.jsxs("li",{className:"flex items-center py-1",children:[o.jsx("span",{className:"w-4 h-4 mr-2 rounded-full bg-primary/20 flex items-center justify-center",children:o.jsx("svg",{className:"w-3 h-3 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),p.name]},p.id))})]}),x&&o.jsxs("div",{className:"mt-4",children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{children:"Merging images..."}),o.jsxs("span",{children:[Math.round(I),"%"]})]}),o.jsx(He,{value:I,className:"h-2"})]})]}),o.jsxs(dn,{className:"gap-2",children:[o.jsx(J,{variant:"outline",onClick:()=>d(!1),disabled:x||m,className:"rounded-md",children:"Cancel"}),o.jsx(J,{onClick:h,disabled:x||m||S.length<2,className:"rounded-md",children:x?"Merging...":"Merge Images"})]})]})})}const sa=({className:n,children:a,...c})=>o.jsxs(tt,{children:[o.jsx(nt,{className:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),o.jsx(rt,{className:Y("bg-background fixed top-[50%] left-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 border shadow-lg duration-200","rounded-lg overflow-hidden","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95",n),...c,children:a})]});function ia({open:n,onOpenChange:a,document:c,onDownload:d}){const[u,m]=D.useState(!1);D.useEffect(()=>{const I=()=>{m(!!window.document.fullscreenElement)};return window.document.addEventListener("fullscreenchange",I),()=>{window.document.removeEventListener("fullscreenchange",I)}},[]);const y=()=>{const I=window.document.getElementById("document-viewer");I&&(u?window.document.exitFullscreen&&window.document.exitFullscreen():I.requestFullscreen&&I.requestFullscreen())},x=()=>{const{meta:I,url:E}=c;return I.type==="application/pdf"?o.jsx("iframe",{src:`${E}#toolbar=0`,className:"w-full h-full border-0",title:I.name}):I.type.startsWith("image/")?o.jsx("img",{src:E,alt:I.name,className:"max-w-full max-h-full object-contain"}):o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Preview not available for this file type"})})};return o.jsx(ot,{open:n,onOpenChange:a,children:o.jsxs(sa,{className:"max-w-5xl w-[90vw] h-[80vh] flex flex-col p-0",children:[o.jsxs("div",{className:"p-4 border-b flex flex-row items-center justify-between bg-gray-50 dark:bg-gray-800",children:[o.jsx(at,{className:"truncate max-w-[60%] text-lg",children:c.meta.name}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(J,{variant:"outline",size:"sm",onClick:y,className:"flex items-center gap-1 cursor-pointer rounded-md",title:u?"Exit fullscreen":"Enter fullscreen",children:[u?o.jsx(io,{className:"h-4 w-4"}):o.jsx(ao,{className:"h-4 w-4"}),o.jsxs("span",{className:"sr-only",children:[u?"Exit":"Enter"," fullscreen"]})]}),o.jsxs(J,{variant:"outline",size:"sm",onClick:d,className:"flex items-center gap-1 cursor-pointer mr-2 rounded-md",title:"Download document",children:[o.jsx(Rt,{className:"h-4 w-4"}),o.jsx("span",{children:"Download"})]}),o.jsx(ta,{asChild:!0,children:o.jsxs(J,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",title:"Close",children:[o.jsx(Ve,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})})]})]}),o.jsx("div",{id:"document-viewer",className:"flex-1 overflow-auto flex items-center justify-center p-4 bg-gray-100 dark:bg-gray-900",children:x()})]})})}var pn="AlertDialog",[ca,Aa]=ze(pn,[Wt]),se=Wt(),vn=n=>{const{__scopeAlertDialog:a,...c}=n,d=se(a);return o.jsx(an,{...d,...c,modal:!0})};vn.displayName=pn;var la="AlertDialogTrigger",ua=D.forwardRef((n,a)=>{const{__scopeAlertDialog:c,...d}=n,u=se(c);return o.jsx(Zo,{...u,...d,ref:a})});ua.displayName=la;var da="AlertDialogPortal",yn=n=>{const{__scopeAlertDialog:a,...c}=n,d=se(a);return o.jsx(tt,{...d,...c})};yn.displayName=da;var fa="AlertDialogOverlay",xn=D.forwardRef((n,a)=>{const{__scopeAlertDialog:c,...d}=n,u=se(c);return o.jsx(nt,{...u,...d,ref:a})});xn.displayName=fa;var pe="AlertDialogContent",[ma,ga]=ca(pe),wn=D.forwardRef((n,a)=>{const{__scopeAlertDialog:c,children:d,...u}=n,m=se(c),y=D.useRef(null),x=be(a,y),I=D.useRef(null);return o.jsx(Xo,{contentName:pe,titleName:bn,docsSlug:"alert-dialog",children:o.jsx(ma,{scope:c,cancelRef:I,children:o.jsxs(rt,{role:"alertdialog",...m,...u,ref:x,onOpenAutoFocus:ge(u.onOpenAutoFocus,E=>{var S;E.preventDefault(),(S=I.current)==null||S.focus({preventScroll:!0})}),onPointerDownOutside:E=>E.preventDefault(),onInteractOutside:E=>E.preventDefault(),children:[o.jsx(Jr,{children:d}),o.jsx(pa,{contentRef:y})]})})})});wn.displayName=pe;var bn="AlertDialogTitle",Dn=D.forwardRef((n,a)=>{const{__scopeAlertDialog:c,...d}=n,u=se(c);return o.jsx(sn,{...u,...d,ref:a})});Dn.displayName=bn;var Nn="AlertDialogDescription",_n=D.forwardRef((n,a)=>{const{__scopeAlertDialog:c,...d}=n,u=se(c);return o.jsx(cn,{...u,...d,ref:a})});_n.displayName=Nn;var ha="AlertDialogAction",jn=D.forwardRef((n,a)=>{const{__scopeAlertDialog:c,...d}=n,u=se(c);return o.jsx(Pe,{...u,...d,ref:a})});jn.displayName=ha;var In="AlertDialogCancel",Cn=D.forwardRef((n,a)=>{const{__scopeAlertDialog:c,...d}=n,{cancelRef:u}=ga(In,c),m=se(c),y=be(a,u);return o.jsx(Pe,{...m,...d,ref:y})});Cn.displayName=In;var pa=({contentRef:n})=>{const a=`\`${pe}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${pe}\` by passing a \`${Nn}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${pe}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return D.useEffect(()=>{var d;document.getElementById((d=n.current)==null?void 0:d.getAttribute("aria-describedby"))||console.warn(a)},[a,n]),null},va=vn,ya=yn,Sn=xn,En=wn,Pn=jn,An=Cn,Rn=Dn,Fn=_n;const xa=va,wa=ya,Tn=D.forwardRef(({className:n,...a},c)=>o.jsx(Sn,{className:Y("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...a,ref:c}));Tn.displayName=Sn.displayName;const $n=D.forwardRef(({className:n,...a},c)=>o.jsxs(wa,{children:[o.jsx(Tn,{}),o.jsx(En,{ref:c,className:Y("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...a})]}));$n.displayName=En.displayName;const kn=({className:n,...a})=>o.jsx("div",{className:Y("flex flex-col space-y-2 text-center sm:text-left",n),...a});kn.displayName="AlertDialogHeader";const On=({className:n,...a})=>o.jsx("div",{className:Y("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...a});On.displayName="AlertDialogFooter";const Ln=D.forwardRef(({className:n,...a},c)=>o.jsx(Rn,{ref:c,className:Y("text-lg font-semibold",n),...a}));Ln.displayName=Rn.displayName;const Mn=D.forwardRef(({className:n,...a},c)=>o.jsx(Fn,{ref:c,className:Y("text-sm text-muted-foreground",n),...a}));Mn.displayName=Fn.displayName;const Bn=D.forwardRef(({className:n,...a},c)=>o.jsx(Pn,{ref:c,className:Y(At(),n),...a}));Bn.displayName=Pn.displayName;const Un=D.forwardRef(({className:n,...a},c)=>o.jsx(An,{ref:c,className:Y(At({variant:"outline"}),"mt-2 sm:mt-0",n),...a}));Un.displayName=An.displayName;function ba(){const{documents:n,isLoading:a,selectedDocIds:c,loadDocuments:d,viewDocument:u,downloadDocument:m,removeDocument:y,shareDocument:x,toggleDocumentSelection:I,selectAllDocuments:E,clearSelection:S}=Ut();D.useEffect(()=>{console.log("DocumentList mounted, loading documents"),d()},[d]);const{convertToPDF:h}=Ke(d),[p,$]=D.useState(!1),[j,C]=D.useState(!1),[_,R]=D.useState(!1),[T,X]=D.useState(null),[M,f]=D.useState(!1),[F,P]=D.useState(null),k=c.some(W=>{const ee=n.find(ye=>ye.id===W);return ee&&ee.type!=="application/pdf"}),z=c.some(W=>{const ee=n.find(ye=>ye.id===W);return ee&&ee.type.startsWith("image/")}),G=async W=>{const ee=await u(W);ee&&(X(ee),R(!0))},K=()=>{T&&m(T.meta.id)},q=W=>{P(W),f(!0)},Q=async()=>{F&&(await y(F.id),f(!1),P(null))},le=async W=>{await h(W)},fe=()=>{k&&$(!0)},ve=()=>{z&&c.length>=2&&C(!0)};return a?o.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((W,ee)=>o.jsx(Uo,{className:"h-32 w-full"},ee))}):n.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No documents found. Upload some documents to get started."})}):o.jsxs("div",{children:[o.jsx(Wo,{documents:n,selectedDocIds:c,onSelectAll:E,onConvertToPdf:fe,onMergeImages:ve,hasImageSelection:z,hasNonPdfSelection:k}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(W=>o.jsx(zo,{document:W,isSelected:c.includes(W.id),onToggleSelect:I,onView:G,onDownload:m,onDelete:()=>q(W),onShare:x,onConvert:le},W.id))}),o.jsx(oa,{open:p,onOpenChange:$,documents:n,selectedDocIds:c,onConversionComplete:()=>{d(),S()}}),o.jsx(aa,{open:j,onOpenChange:C,documents:n,selectedDocIds:c,onMergeComplete:()=>{d(),S()}}),T&&o.jsx(ia,{open:_,onOpenChange:R,document:T,onDownload:K}),o.jsx(xa,{open:M,onOpenChange:f,children:o.jsxs($n,{className:"max-w-md",children:[o.jsxs(kn,{children:[o.jsx(Ln,{children:"Confirm Deletion"}),o.jsxs(Mn,{children:['Are you sure you want to delete "',F==null?void 0:F.name,'"? This action cannot be undone.']})]}),o.jsxs(On,{className:"flex items-center justify-end gap-2",children:[o.jsx(Un,{className:"cursor-pointer",children:"Cancel"}),o.jsx(Bn,{onClick:Q,className:"bg-red-500 hover:bg-red-600 cursor-pointer",children:"Delete"})]})]})})]})}function Da(){const{loadDocuments:n}=Ut(),[a,c]=D.useState(!0),[d,u]=D.useState(0);D.useEffect(()=>{if(console.log("DocumentsPage: Loading documents (uploadCount:",d,")"),n(),d>0){const y=setTimeout(()=>{console.log("DocumentsPage: Delayed reload after upload"),n()},1e3);return()=>clearTimeout(y)}},[n,d]);const m=D.useCallback(()=>{console.log("Upload complete in DocumentsPage, triggering reload"),u(y=>y+1)},[]);return o.jsxs("div",{className:"container mx-auto py-6 px-4 max-w-6xl",children:[o.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Documents"}),a&&o.jsxs(mn,{className:"mb-6 relative pr-10",variant:"default",children:[o.jsx(gn,{children:"Welcome to DocFlow Lite"}),o.jsx(hn,{children:"Upload documents, convert them to PDF, and merge multiple images into a single PDF."}),o.jsx(J,{variant:"ghost",size:"icon",className:"absolute top-3 right-3 h-6 w-6 rounded-full p-0 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>c(!1),"aria-label":"Dismiss notification",children:o.jsx(Ve,{className:"h-3 w-3"})})]}),o.jsx($o,{onUploadComplete:m}),o.jsx(ba,{},`document-list-${d}`)]})}const Ra=Br(function(){return o.jsx(Da,{})});export{Ra as default,Ea as meta};
